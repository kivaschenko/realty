{% extends "base.html" %}
{% block title %} Профіль користувача {{object.username}} {% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item active"><a href="{% url 'home' %}">Головна</a>
  {%if object.agency%}
<li class="breadcrumb-item active">
  <a href="{%url 'agency' object.agency.pk object.agency.slug %}">
  {{ object.agency}}</a>
  {%else%}Індивідуальний продавець{%endif%}
<li class="breadcrumb-item">Ріелтор {{ object.created_by.first_name }}
  {{object.created_by.last_name}}</a>
{% endblock %}

{% load static%}
{% block content %}
<div class="container content">

  <div class="row" style="margin-left: 20px;">
    <div class="col-md-5">
    {% if object.avatar %}
      <img src="{{ object.avatar.url }}" class="img-thumbnail"
      alt="Фото " style="width:300px;">
    {% else %}
      <img src="{% static 'img/user.png' %}" class="img-thumbnail">
    {% endif %}
      <br>
      <br>
    {% if object.created_by == request.user %}
      <a href="{%url 'edit_realtor' object.pk%}" class="btn btn-sm btn-info"> Редагувати профіль </a>
      <br>
      <p><em>Переглядів профілю: {{object.num_visits}}</em></p>
    {% endif %}
    </div>

    <div class="col">
      <dl class="row">
        <dt class="col-sm-3 text-right">Ріелтор </dt>
        <dd class="col-sm-9">
        <h3 style="font-family: 'Lobster', cursive; font-size: 26px;">
        {{ object.created_by.first_name }} {{object.created_by.last_name}}</h3>
        </dd>

        <dt class="col-sm-3 text-right">Телефон основний</dt>
        <dd class="col-sm-9"><a href="tel:{{object.phone}}">
        {{object.phone}}</a></dd>

        <dt class="col-sm-3 text-right">Працює</dt>
        <dd class="col-sm-9">з {{object.start_year}} року</dd>

        <dt class="col-sm-3 text-right">Агенство, компанія</dt>
        <dd class="col-sm-9">
          {%if object.agency%}
            <a href="{% url 'agency' object.agency.pk object.agency.slug %}">
            <h2 style="font-family: 'Lobster', cursive; font-size: 26px;">
            {{object.agency.name}}</h2>
            </a>
            {% elif object.created_by == request.user %}
            <p>У вас не вибрано Агенство нерухомості. Ви можете вибрати із 
            списка існуючих на сторінці "Редагувати профіль" або:</p><br>
            <a href="{%url 'create_agency'%}" class="btn btn-sm btn-info">Створити свое агенство</a>
          {%else%}
            Не вказано
          {%endif%}
        </dd>

        <dt class="col-sm-3 text-right">Адреса офісу</dt>
        <dd class="col-sm-9">
        <em style="font-family: 'Times New Roman', serif;">
        {%if object.agency.address%}{{object.agency.address}}{%else%}Не вказано
        {%endif%}</em></dd>
        <dt class="col-sm-3 text-right">Професійна біографія</dt>
        <dd class="col-sm-9">{{object.bio|linebreaks}}</dd>
      </dl>
    </div>
  </div>
</div>
<div class="container content">
  <div class="row">
    <div class="col-sm-6">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Список квартир ріелтора</h4>
          {% if flat_list%}
            {% for object in flat_list%}
            <ul>
              <li>
                <em>{{object.pub_date | date}}</em> -
                <h5><a href="{%url 'offer-detail' object.pk object.slug%}">
                {{object.title}}</a>-
                <span class="badge badge-primary">{{object.price}}
                {{object.get_currency_display}}</span></h5>  
                {%if object.created_by == request.user%}
                  <a href="{%url 'update_offer' object.pk%}" class="btn btn-sm btn-primary"> Редагувати </a>  
                  <a href="{%url 'change_owner' object.pk%}" class="btn btn-sm btn-secondary"> Передати іншому</a>
                {%endif%} 
              </li>
            </ul>
            {%endfor%}
          {%else%}
            <p>Тут поки ще немає оголошень</p>
          {%endif%}
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Список будинків ріелтора</h4>
          {% if house_list%}
            {% for object in house_list%}
            <ul>
              <li>
                <em>{{object.pub_date | date}}</em> -
                <h5><a href="{%url 'house' object.pk object.slug%}">
                {{object.title}}</a>-
                <span class="badge badge-primary">{{object.price}}
                {{object.get_currency_display}}</span></h5>  
                {%if object.created_by == request.user%}
                  <a href="{%url 'house_update' object.pk%}" class="btn btn-sm btn-primary">Редагувати</a>    
                  <a href="{%url 'change_rieltor' object.pk%}" class="btn btn-sm btn-secondary">Передати іншому</a>
                {%endif%}                
              </li>
            </ul>
            {%endfor%}
          {%else%}
            <p>Тут поки ще немає оголошень</p>
          {%endif%}
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Список земельних ділянок ріелтора</h4>
          {% if land_list%}
            {% for object in land_list%}
            <ul>
              <li>
                <em>{{object.pub_date | date}}</em> -
                <h5><a href="{%url 'land_detail' object.slug%}">
                {{object.title}}</a>-
                <span class="badge badge-primary">{{object.price}}
                {{object.get_currency_display}}</span></h5>  
                {%if object.created_by == request.user%}
                  <a href="#" class="btn btn-sm btn-primary"> Редагувати </a>    
                  <a href="#" class="btn btn-sm btn-secondary">Передати іншому</a>
                {%endif%}                
              </li>
            </ul>
            {%endfor%}
          {%else%}
            <p>Тут поки ще немає оголошень</p>
          {%endif%}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
